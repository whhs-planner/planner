<!DOCTYPE html>
<html lang="en-US">

<head>

<title>Planner</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover, user-scalable=no">
<meta name="author" content="Jacob McGinley">
<meta name="description" content="A smart planner">
<meta name="google-site-verification" content="_LrfHy7pIualH1TolkQ5b3Po0dtjYrx-QQsiXelwx20">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="manifest" href="manifest.webmanifest">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300&family=Roboto:wght@300&display=swap" rel="stylesheet">


<style>
  *, *::before, *::after {
    box-sizing: border-box;
    font-family: 'Roboto', sans-serif;
  }
  *:focus {
    outline: none;
  }
  .days span {
    position:relative;
    padding: 5px;
    padding-left: 0;
    font-size: 15px;
    text-align: center;
  }
  #m {
    left: 6vw;
  }
  #t {
    left: 20vw
  }
  #w {
    left: 34vw
  }
  #th {
    left: 48vw;
  }
  #f {
    left: 65vw;
  }
  .notes {
    padding: 0px 0px 0px 15px;
  }
  textarea {
    resize: none;
    height: 75vh;
    width: calc((100vw / 5) - 5px);
    margin-left:-6px;
    overflow: scroll;
  }

body {
-webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none;
}

  .wrapper {
    width:100vw;
    height: 50px;
    background: #0c0d0e;
    padding: 10px;
    position:fixed;
    top:0; left:0;
    color: white;
    text-align: center;
  }
  .wrapper span {
    position: relative;
    padding: 5px;
    top: 4px;
  }
  .content {
    margin-top: 50px;
    margin-left:0;
  }
  #save {
   position: fixed;
   right: 20px;
   bottom: 5px;
   width: 100px;
   height: 40px;
  }
  #info {
   position: fixed;
   bottom: 10px;
   left: 10px;
   color: #330fb2;
   font-size: 13px;
  }
  header button {
    position: absolute;
    top: 0;
    height: 50px;
    cursor: pointer;
    background: #0c0d0e;
    color: white;
    border: 1px solid rgba(255,255,255,0);
    transition: 0.25s ease all;
  }
  #home {
    left: 10px;
  }
  #classes {
    left: 72px;
  }
  #resources {
    left: 140px;
  }
  #settings {
    left: 222.5px;
  }
  header button:hover {
    border: 1px solid rgba(255,255,255,0.6);
  }
  .topspace {
     margin-top: 60px;
   }
    .resources {
     line-height: 25px;
     margin-left: 30px;
    }.classes {
     line-height: 25px;
    }
     #delete {
     margin-left: 10px; 
     }
    .settings {
       margin-left:20px;
       height: calc(100vh - 60px);
     }
    #uTempTitle {
       margin-left: 5vw;
    }
   .page-loader {
     position: absolute;
     left:0;
     bottom:0;
     width:100vw;
     height: 65vh;
   }
   a {
     text-decoration: none;
     color: blue;
   }
   .planner {
      margin-top: 70px;
    }
   #reset {
     position:fixed;
     left: 17px;
     width: calc(((100vw / 5) - 5px)*5 - 8px);
   }
   #uIDTitle {
     margin-left: calc((100vw / 5) + 50px);
     position:relative;
     bottom: 78.45vh;
   }
   #uID {
     margin-left: calc((100vw / 5) - 5px);
     position:relative;
     bottom: 78.45vh;
   }
   #time {
     position: fixed;
     right: 10px;
     top:12px;
     font-size: 15px;
   }
   #loadingScreen{
     position:fixed;
     top:0;
     left:0;
     z-index: 1000;
     width: 100vw;
     height: 100vh;
     background: white;
     text-align: center;
     line-height: 100vh;
   }
   #loadImage {
     position:fixed;
     left: calc(50vw - 32px);
     top: calc(25vw - 64px);
     width: 64px;
     height: 64px;
     border: none;
     border-radius: 10px;
   }
   #loadingScreen span {
     position: relative;
     top:25px;
     left:1px;
   }
</style>

</head>
<body>

<div id="loadingScreen">

<img id="loadImage" src="favicon-32x32.png">
<span>Loading...</span>

</div>

<div class="wrapper">
<span id="nav-title">Planner</span>
<header class="nav">
  <button onclick="changeScreen('planner');" id="home">Planner</button>
  <button onclick="changeScreen('classes');" id="classes">Classes</button>
  <button onclick="changeScreen('resources');" id="resources">Resources</button>
  <button onclick="changeScreen('settings');" id="settings">Settings</button>
  <span id="time"></span>
</header>
</div>
<div class="planner content">
  <div class="days">
    <span id="m">Monday</span>
    <span id="t">Tuesday</span>
    <span id="w">Wednesday</span>
    <span id="th">Thursday</span>
    <span id="f">Friday</span>
  </div>
  <div class="notes">
    <textarea spellcheck="off" resize="no" id="m-t"></textarea>
    <textarea spellcheck="off" id="t-t"></textarea>
    <textarea spellcheck="off" id="w-t"></textarea>
    <textarea spellcheck="off" id="th-t"></textarea>
    <textarea spellcheck="off" id="f-t"></textarea>
  </div>
  <button onclick="template();" id="reset">Reset</button>
  <button id="save" onclick="updateAll();">Save</button>
</div>
<div class="classes content topspace" hidden>
<ul id="class-list">

<div class="class-handler"></div>
<button id="add-class" onclick="classHandle('add');">+</button>

</ul>
</div>
<div class="resources content topspace" hidden>

<div class="handler"></div>
<button id="add-resource" onclick="resource('add');">+</button>

</div>
<div class="settings content topspace" hidden>

<span id="uTempTitle">Template</span><br/>
<textarea id="uTemplate"></textarea><br/>
<span id="uIDTitle">User Identification</span><br/>
<textarea id="uID"></textarea>

</div>

<div class="footer"><b>
<span id="info"></span>
</b>
</div>

</body>
<script>

window.onload = function() {

loadingScreen.remove();

var planner = localStorage.getItem("planner").split("ß");
document.querySelector("#m-t").value = planner[0];
document.querySelector("#t-t").value = planner[1];
document.querySelector("#w-t").value = planner[2];
document.querySelector("#th-t").value = planner[3];
document.querySelector("#f-t").value = planner[4];
document.querySelector(".handler").innerHTML = localStorage.getItem("resourceContent").toString();
document.querySelector(".class-handler").innerHTML = localStorage.getItem("classContent").toString();

}

var mon = null;
var tues = null;
var thurs = null;
var wed = null;
var fri = null;


function updateAll() {
mon = document.querySelector("#m-t").value;
tues = document.querySelector("#t-t").value;
wed = document.querySelector("#w-t").value;
thurs = document.querySelector("#th-t").value;
fri = document.querySelector("#f-t").value;
localStorage.setItem("planner",mon+"ß"+tues+"ß"+wed+"ß"+thurs+"ß"+fri);
}

function changeScreen(e) {

  e = e.toString();

  document.querySelectorAll(".content").forEach(function(e){ e.hidden = true; });

  document.querySelector("."+e).hidden = false;

}

function openIniFrame(link) {

link = link.toString();
window.open(link,"_blank");

}

var resources = localStorage.getItem("resources");
if(!resources){
resources = 0;
}


function resource(action, id) {
if (action == "add") {
resources++;
document.querySelector(".handler").innerHTML += decodeURI("%3Cspan%20id=%22resource-"+resources+"-edit%22%3E%3Cinput%20placeholder=%22Title%22%20id=%22resource-"+resources+"-title%22%3E%3Cinput%20placeholder=%22Link%22%20id=%22resource-"+resources+"-link%22%3E%3Cbutton%20onclick=%22resource('save','resource-"+resources+"');%22%20id=%22resource-"+resources+"-save%22%3ESave%3C/button%3E%3C/span%3E");
}else if (action == "save") {
var title = document.querySelector("#"+id+"-title").value.toString();
var link = document.querySelector("#"+id+"-link").value.toString();
document.querySelector("#"+id+"-edit").remove();
document.querySelector(".handler").innerHTML += `<span id="resource-`+resources+`"><a target="_blank" href='${link}'>${title}</a><button style="margin-left: 5px;" onclick="resource('edit','resource-`+resources+`');" id="resource-`+resources+`-openEdit">Edit</button><button onclick="this.parentElement.remove();" id="resource-`+resources+`-delete">Delete</button><br/></span>`;
localStorage.setItem("resourceContent",document.querySelector(".handler").innerHTML.toString());
localStorage.setItem("resources",resources);
}else if (action == "edit") {
alert("Coming Soon");
}else{
alert("Code is wrong");
}
}

var period = localStorage.getItem("period");
if(!period) {
period = 0;
}
function classHandle(action, id) {
if (action == "add") {
period++;
document.querySelector(".class-handler").innerHTML += `<span id="period-`+period+`"><input placeholder="Class Name" id="period-`+period+`-className"><input placeholder="Teacher Name" id="period-`+period+`-teacherName"><input placeholder="Class Link" id="period-`+period+`-linkToPage"><button onclick="classHandle('save','period-`+period+`');" id="class-save">Save</button><br/></span>`;
}else if (action == "save") {
var title = document.querySelector("#"+id+"-className").value.toString();
var teach = document.querySelector("#"+id+"-teacherName").value.toString();
var link = document.querySelector("#"+id+"-linkToPage").value.toString();
document.querySelector(".class-handler").innerHTML += `<span id="period-`+period+`-inList">`+title+` | <b><a target="_blank" href="`+link+`">`+teach+`</a></b>ㅤ<button id="delete" onclick="this.parentElement.remove();">Delete</button><br/></span>`;
localStorage.setItem("classContent",document.querySelector(".class-handler").innerHTML.toString());
localStorage.setItem("period",period);
document.querySelector("#"+id).remove();
}else{
alert("Code is wrong");
}
}


Element.prototype.remove = function() {
    this.parentElement.removeChild(this);
localStorage.setItem("resourceContent",document.querySelector(".handler").innerHTML.toString());
localStorage.setItem("classContent",document.querySelector(".class-handler").innerHTML.toString());
}
NodeList.prototype.remove = HTMLCollection.prototype.remove = function() {
    for(var i = this.length - 1; i >= 0; i--) {
        if(this[i] && this[i].parentElement) {
            this[i].parentElement.removeChild(this[i]);
        }
    }
localStorage.setItem("resourceContent",document.querySelector(".handler").innerHTML.toString());
localStorage.setItem("classContent",document.querySelector(".class-handler").innerHTML.toString());

}

var userTemplate = localStorage.getItem("userTemplate");
if(!userTemplate) {

userTemplate = "";

}
document.querySelector("#uTemplate").value = userTemplate;
var userIdentify = localStorage.getItem("userIdentify");
if(!userIdentify) {

userIdentify = "";

}
document.querySelector("#uID").value = userIdentify.split("<br/>").join(decodeURI("%0A"));
document.querySelector("#info").innerHTML = userIdentify;

function template() {

if(confirm("Are you sure you want to reset your planner?")) {

document.querySelectorAll(".notes textarea").forEach(function(e) {

  e.value = userTemplate;

});
}
}

document.querySelector("#uTemplate").onkeyup = function() {
var temp = document.querySelector("#uTemplate").value.toString();
userTemplate = temp;
localStorage.setItem("userTemplate",userTemplate);
}
document.querySelector("#uID").onkeyup = function() {
var temp = document.querySelector("#uID").value.toString().split("\n").join("<br/>");
userIdentify = temp;
document.querySelector("#info").innerHTML = temp;
localStorage.setItem("userIdentify",userIdentify);
}

function setTime() { window.requestAnimationFrame(setTime);

var hour = parseInt(new Date().getHours());
var minute = parseInt(new Date().getMinutes());
var apm;

(hour > 12) ? apm = "PM" : apm = "AM";
(hour > 12) ? hour -= 12 : "";

time.innerHTML = hour+":"+minute+" "+apm;

}

window.requestAnimationFrame(setTime);

</script>
</html>
